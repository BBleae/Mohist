--- ../src-base/minecraft/net/minecraft/world/gen/structure/template/Template.java
+++ ../src-work/minecraft/net/minecraft/world/gen/structure/template/Template.java
@@ -211,10 +211,9 @@
             for (Template.BlockInfo template$blockinfo : this.blocks)
             {
                 BlockPos blockpos = transformedBlockPos(placementIn, template$blockinfo.pos).add(pos);
+                Template.BlockInfo template$blockinfo1 = templateProcessor != null ? templateProcessor.processBlock(worldIn, blockpos, template$blockinfo) : template$blockinfo;
                 // Forge: skip processing blocks outside BB to prevent cascading worldgen issues
                 if (structureboundingbox != null && !structureboundingbox.isVecInside(blockpos)) continue;
-                Template.BlockInfo template$blockinfo1 = templateProcessor != null ? templateProcessor.processBlock(worldIn, blockpos, template$blockinfo) : template$blockinfo;
-
                 if (template$blockinfo1 != null)
                 {
                     Block block1 = template$blockinfo1.blockState.getBlock();
@@ -248,9 +247,11 @@
                                 template$blockinfo1.tileentityData.setInteger("x", blockpos.getX());
                                 template$blockinfo1.tileentityData.setInteger("y", blockpos.getY());
                                 template$blockinfo1.tileentityData.setInteger("z", blockpos.getZ());
+                                tileentity2.isLoadingStructure = true; // Paper
                                 tileentity2.readFromNBT(template$blockinfo1.tileentityData);
                                 tileentity2.mirror(placementIn.getMirror());
                                 tileentity2.rotate(placementIn.getRotation());
+                                tileentity2.isLoadingStructure = false; // Paper
                             }
                         }
                     }
